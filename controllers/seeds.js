const ObjectId=require("mongodb").ObjectId,db=require("../models"),Seed=db.seeds;async function getAllSeeds(req,res){Seed.find().then(seeds=>{res.status(200).json(seeds)}).catch(err=>{res.status(500).json({message:err})})}async function getOneSeed(req,res){ObjectId.isValid(req.params.id)?Seed.findById(req.params.id).then(seed=>{seed?res.status(200).json(seed):res.status(404).json({message:"Seed with that ID not found!"})}).catch(err=>{res.status(500).json({message:err})}):res.status(400).json("Must use a valid seed ID to get a seed's info.")}async function createSeed(req,res){const seed=new Seed({name:req.body.name,type:req.body.type||"n/a",seedsPerOunce:req.body.seedsPerOunce,seedsPer100Feet:req.body.seedsPer100Feet,sowingDepth:req.body.sowingDepth,daysToGermination:req.body.daysToGermination,rowSpacing:req.body.rowSpacing,plantSpacing:req.body.plantSpacing,daysToHarvest:req.body.daysToHarvest,plantingDate:req.body.plantingDate});seed.save().then(seed=>{res.status(201).json({message:"Seed added successfully",seed:seed})}).catch(err=>{res.status(500).json({message:"Seed was not saved",error:err})})}async function updateSeed(req,res){ObjectId.isValid(req.params.id)?Seed.findByIdAndUpdate(req.params.id,req.body,{useFindAndModify:!1}).then(seed=>{seed?res.status(204).json({message:"The seed was updated successfully!"}):res.status(404).json({message:"Seed with that ID was not found and could not be updated!"})}).catch(err=>{res.status(500).json({message:"Seed was not updated!",error:err})}):res.status(400).json("Must use a valid seed ID to update a seed's info.")}async function deleteSeed(req,res){ObjectId.isValid(req.params.id)?Seed.findByIdAndRemove(req.params.id).then(seed=>{seed?res.status(204).json({message:"The seed was deleted successfully!"}):res.status(404).json({message:"Seed with that ID was not found and coule not be deleted!"})}).catch(err=>{res.status(500).json({message:"Seed was not deleted!",error:err})}):res.status(400).json("Must use a valid seed ID to delete a seed's info.")}module.exports={getAllSeeds:getAllSeeds,getOneSeed:getOneSeed,createSeed:createSeed,updateSeed:updateSeed,deleteSeed:deleteSeed};